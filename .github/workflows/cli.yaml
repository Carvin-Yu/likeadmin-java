name: CI PR Merged
# 该脚本仅在 PR MERGE 的时候进行测试，不建议 将测试结果上传到 github
# 可以通过变量来判断，比如 PR close 的时候 发布 github release & tag

on:
  pull_request:
    branches:
      - master # 正式版本
  push:
  workflow_dispatch: # 手动触发

env:
  GITHUB_TOKEN: ${{ github.token }}

permissions: write-all

jobs:
  like_admin:
    name: 编译后端
    runs-on: ubuntu-latest
    steps:
      - name: 获取代码
        uses: actions/checkout@v4
        with:
          GITHUB_TOKEN: "${{ secrets.TOKEN_GITHUB }}"
          GITHUB_TOKEN1: "${{ github.token }}"
          GITHUB_TOKEN2: "${{ env.GITHUB_TOKEN }}"
          GITHUB_TOKEN3: "${{ GITHUB_TOKEN }}"