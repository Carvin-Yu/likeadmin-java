var M=Object.defineProperty,$=Object.defineProperties;var h=Object.getOwnPropertyDescriptors;var g=Object.getOwnPropertySymbols;var L=Object.prototype.hasOwnProperty,R=Object.prototype.propertyIsEnumerable;var b=(e,a,t)=>a in e?M(e,a,{enumerable:!0,configurable:!0,writable:!0,value:t}):e[a]=t,V=(e,a)=>{for(var t in a||(a={}))L.call(a,t)&&b(e,t,a[t]);if(g)for(var t of g(a))R.call(a,t)&&b(e,t,a[t]);return e},w=(e,a)=>$(e,h(a));import{M as j}from"./index.9376f4e2.js";import{F as N}from"./index.692c64fd.js";import{e as S,f as z,b as T,g as G}from"./auth.a312480e.js";import{_ as H,u as I}from"./index.b48d4574.js";import{d as J,q as _,i as K,a7 as O,r as P,o as Q,a as s,aa as W,b as F,c as A,f as u,w as l,ab as X,j as C,F as Y,l as Z,e as x,m as ee}from"./vendor.d574ef89.js";import"./index.44c95aef.js";import"./index.cbe8613a.js";const ae=J({components:{MaterialSelect:j,FooterBtns:N},setup(){const e=_(null),{router:a,route:t}=I(),i=K(()=>{var r;return(r=t.query)==null?void 0:r.id}),f=_(!1),c=_([]),{formData:m,rules:d}=O(P({formData:{username:"",nickname:"",role:"",avatar:"",password:"",password_confirm:"",isDisable:0,isMultipoint:0},rules:{username:[{required:!0,message:"\u8BF7\u8F93\u5165\u8D26\u53F7",trigger:["blur"]}],nickname:[{required:!0,message:"\u8BF7\u8F93\u5165\u540D\u79F0",trigger:["blur"]}],role:[{required:!0,message:"\u8BF7\u9009\u62E9\u89D2\u8272",trigger:["blur"]}],password:[],password_confirm:[]}})),p=()=>{S({page_type:1}).then(r=>{c.value=r.lists})},n=()=>{if(!i.value){d.value.password=[{required:!0,message:"\u8BF7\u8F93\u5165\u5BC6\u7801",trigger:["blur"]}],d.value.password_confirm=[{required:!0,message:"\u8BF7\u8F93\u5165\u786E\u8BA4\u5BC6\u7801",trigger:["blur"]}];return}f.value=!0,z({id:i.value}).then(r=>{m.value=r}).finally(()=>{f.value=!1})},v=()=>{var r;(r=e.value)==null||r.validate(D=>{if(!D)return;(i.value?T(w(V({},m.value),{id:i.value})):G(m.value)).then(()=>{setTimeout(()=>a.go(-1),500)})})};return Q(()=>{n(),p()}),{id:i,formRefs:e,loading:f,formData:m,rules:d,roleList:c,onSubmit:v}}}),ue={class:"admin"},oe=x("div",{class:"muted"},"\u5EFA\u8BAE\u5C3A\u5BF8\uFF1A100*100px\uFF0C\u652F\u6301jpg\uFF0Cjpeg\uFF0Cpng\u683C\u5F0F",-1),le=ee("\u4FDD\u5B58");function te(e,a,t,i,f,c){const m=s("el-page-header"),d=s("el-card"),p=s("el-input"),n=s("el-form-item"),v=s("material-select"),r=s("el-option"),D=s("el-select"),B=s("el-switch"),k=s("el-form"),E=s("el-button"),U=s("footer-btns"),q=W("loading");return F(),A("div",ue,[u(d,{shadow:"never"},{default:l(()=>[u(m,{content:e.id?"\u7F16\u8F91\u7BA1\u7406\u5458":"\u65B0\u589E\u7BA1\u7406\u5458",onBack:a[0]||(a[0]=o=>e.$router.back())},null,8,["content"])]),_:1}),X((F(),C(d,{shadow:"never",class:"m-t-15"},{default:l(()=>[u(k,{ref:"formRefs",rules:e.rules,class:"ls-form",model:e.formData,"label-width":"150px",size:"small"},{default:l(()=>[u(n,{label:"\u8D26\u53F7\uFF1A",prop:"username"},{default:l(()=>[u(p,{modelValue:e.formData.username,"onUpdate:modelValue":a[1]||(a[1]=o=>e.formData.username=o),placeholder:"\u8BF7\u8F93\u5165\u8D26\u53F7"},null,8,["modelValue"])]),_:1}),u(n,{label:"\u5934\u50CF\uFF1A"},{default:l(()=>[u(v,{modelValue:e.formData.avatar,"onUpdate:modelValue":a[2]||(a[2]=o=>e.formData.avatar=o),limit:1},null,8,["modelValue"]),oe]),_:1}),u(n,{label:"\u540D\u79F0\uFF1A",prop:"nickname"},{default:l(()=>[u(p,{modelValue:e.formData.nickname,"onUpdate:modelValue":a[3]||(a[3]=o=>e.formData.nickname=o),placeholder:"\u8BF7\u8F93\u5165\u540D\u79F0"},null,8,["modelValue"])]),_:1}),u(n,{label:"\u89D2\u8272\uFF1A",prop:"role"},{default:l(()=>[u(D,{modelValue:e.formData.role,"onUpdate:modelValue":a[4]||(a[4]=o=>e.formData.role=o),placeholder:"\u8BF7\u9009\u62E9\u89D2\u8272"},{default:l(()=>[(F(!0),A(Y,null,Z(e.roleList,(o,y)=>(F(),C(r,{key:y,label:o.name,value:o.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),u(n,{label:"\u5BC6\u7801\uFF1A",prop:"password"},{default:l(()=>[u(p,{modelValue:e.formData.password,"onUpdate:modelValue":a[5]||(a[5]=o=>e.formData.password=o),"show-password":"",placeholder:"\u8BF7\u8F93\u5165\u5BC6\u7801"},null,8,["modelValue"])]),_:1}),u(n,{label:"\u786E\u8BA4\u5BC6\u7801\uFF1A",prop:"password_confirm"},{default:l(()=>[u(p,{modelValue:e.formData.password_confirm,"onUpdate:modelValue":a[6]||(a[6]=o=>e.formData.password_confirm=o),"show-password":"",placeholder:"\u8BF7\u8F93\u5165\u786E\u8BA4\u5BC6\u7801"},null,8,["modelValue"])]),_:1}),u(n,{label:"\u7BA1\u7406\u5458\u72B6\u6001"},{default:l(()=>[u(B,{modelValue:e.formData.isDisable,"onUpdate:modelValue":a[7]||(a[7]=o=>e.formData.isDisable=o),"active-value":0,"inactive-value":1},null,8,["modelValue"])]),_:1}),u(n,{label:"\u652F\u6301\u591A\u5904\u767B\u5F55"},{default:l(()=>[u(B,{modelValue:e.formData.isMultipoint,"onUpdate:modelValue":a[8]||(a[8]=o=>e.formData.isMultipoint=o),"active-value":1,"inactive-value":0},null,8,["modelValue"])]),_:1})]),_:1},8,["rules","model"])]),_:1})),[[q,e.loading]]),u(U,null,{default:l(()=>[u(E,{type:"primary",size:"small",onClick:e.onSubmit},{default:l(()=>[le]),_:1},8,["onClick"])]),_:1})])}var Fe=H(ae,[["render",te]]);export{Fe as default};
