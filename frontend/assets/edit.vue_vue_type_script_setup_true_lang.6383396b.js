import{M as x,N as O,A as w,y as N,B as U}from"./element-plus.f93fd622.js";import{r as F,f as Y}from"./index.ab5c8d8d.js";import{P as I}from"./index.ea69f3d7.js";import{d as T,s as B,a0 as G,e as M,o as m,c as g,V as t,M as l,a as r,T as E,U as C,u as A,L,S}from"./@vue.cab01781.js";function au(){return F.get({url:"/setting/storage/list"})}function P(i){return F.post({url:"/setting/storage/edit",params:i})}function j(i){return F.get({url:"/setting/storage/detail",params:i})}const z={class:"edit-popup"},H={class:"form-tips"},J={key:0},Q={class:"flex-1"},W={class:"flex-1"},X=r("div",{class:"form-tips"}," \u8BF7\u8865\u5168http://\u6216https://\uFF0C\u4F8B\u5982https://static.cloud.com ",-1),Z=E("\u5173\u95ED"),$=E("\u5F00\u542F"),lu=T({__name:"edit",emits:["success"],setup(i,{expose:y,emit:D}){const d=B(),p=B(),e=G({alias:"",bucket:"",accessKey:"",secretKey:"",domain:"",region:"",status:0}),V=[{name:"\u672C\u5730\u5B58\u50A8",type:"local",tips:"\u672C\u5730\u5B58\u50A8\u65B9\u5F0F\u4E0D\u9700\u8981\u914D\u7F6E\u5176\u4ED6\u53C2\u6570"},{name:"\u4E03\u725B\u4E91\u5B58\u50A8",type:"qiniu",tips:"\u5207\u6362\u4E03\u725B\u4E91\u5B58\u50A8\u540E\uFF0C\u7D20\u6750\u5E93\u9700\u8981\u91CD\u65B0\u4E0A\u4F20\u81F3\u4E03\u725B\u4E91"},{name:"\u963F\u91CC\u4E91OSS",type:"aliyun",tips:"\u5207\u6362\u963F\u91CC\u4E91OSS\u540E\uFF0C\u7D20\u6750\u5E93\u9700\u8981\u91CD\u65B0\u4E0A\u4F20\u81F3\u963F\u91CC\u4E91OSS"},{name:"\u817E\u8BAF\u4E91OSS",type:"qcloud",tips:"\u5207\u6362\u817E\u8BAF\u4E91OSS\u540E\uFF0C\u7D20\u6750\u5E93\u9700\u8981\u91CD\u65B0\u4E0A\u4F20\u81F3\u817E\u8BAF\u4E91OSS"}],b={bucket:[{required:!0,message:"\u8BF7\u8F93\u5165\u5B58\u50A8\u7A7A\u95F4\u540D\u79F0",trigger:"blur"}],accessKey:[{required:!0,message:"\u8BF7\u8F93\u5165ACCESS_KEY",trigger:"blur"}],secretKey:[{required:!0,message:"\u8BF7\u8F93\u5165SECRET_KEY",trigger:"blur"}],domain:[{required:!0,message:"\u8BF7\u8F93\u5165\u7A7A\u95F4\u57DF\u540D",trigger:"blur"}],region:[{required:!0,message:"\u8BF7\u8F93\u5165REGION",trigger:"blur"}]},_=M(()=>V.find(a=>a.type==e.alias)),K=async()=>{var a,u;await((a=d.value)==null?void 0:a.validate()),await P(e),Y.msgSuccess("\u64CD\u4F5C\u6210\u529F"),(u=p.value)==null||u.close(),D("success")},k=async()=>{const a=await j({alias:e.alias});for(const u in a)e[u]=a[u]},v=a=>{var u;e.alias=a,(u=p.value)==null||u.open(),k()},R=()=>{var a;(a=d.value)==null||a.resetFields()};return y({open:v}),(a,u)=>{const c=x,s=w,n=N,h=O,q=U;return m(),g("div",z,[t(I,{ref_key:"popupRef",ref:p,title:"\u8BBE\u7F6E\u5B58\u50A8",async:!0,width:"550px",clickModalClose:!0,onConfirm:K,onClose:R},{default:l(()=>[t(q,{ref_key:"formRef",ref:d,model:e,"label-width":"120px",rules:b},{default:l(()=>[t(s,{label:"\u5B58\u50A8\u65B9\u5F0F",prop:"alias"},{default:l(()=>{var o;return[r("div",null,[t(c,{"model-value":""},{default:l(()=>{var f;return[E(C((f=A(_))==null?void 0:f.name),1)]}),_:1}),r("div",H,C((o=A(_))==null?void 0:o.tips),1)])]}),_:1}),e.alias!=="local"?(m(),g("div",J,[t(s,{label:" \u5B58\u50A8\u7A7A\u95F4\u540D\u79F0",prop:"bucket"},{default:l(()=>[r("div",Q,[t(n,{modelValue:e.bucket,"onUpdate:modelValue":u[0]||(u[0]=o=>e.bucket=o),placeholder:"\u8BF7\u8F93\u5165\u5B58\u50A8\u7A7A\u95F4\u540D\u79F0(Bucket)"},null,8,["modelValue"])])]),_:1}),t(s,{label:"ACCESS_KEY",prop:"accessKey"},{default:l(()=>[t(n,{modelValue:e.accessKey,"onUpdate:modelValue":u[1]||(u[1]=o=>e.accessKey=o),placeholder:"\u8BF7\u8F93\u5165ACCESS_KEY(AK)"},null,8,["modelValue"])]),_:1}),t(s,{label:"SECRET_KEY",prop:"secretKey"},{default:l(()=>[t(n,{modelValue:e.secretKey,"onUpdate:modelValue":u[2]||(u[2]=o=>e.secretKey=o),placeholder:"\u8BF7\u8F93\u5165SECRET_KEY(SK)"},null,8,["modelValue"])]),_:1}),t(s,{label:"\u7A7A\u95F4\u57DF\u540D",prop:"domain"},{default:l(()=>[r("div",W,[r("div",null,[t(n,{modelValue:e.domain,"onUpdate:modelValue":u[3]||(u[3]=o=>e.domain=o),placeholder:"\u8BF7\u8F93\u5165\u7A7A\u95F4\u57DF\u540D(Domain)"},null,8,["modelValue"])]),X])]),_:1}),e.alias=="qcloud"?(m(),L(s,{key:0,label:"REGION",prop:"region"},{default:l(()=>[t(n,{modelValue:e.region,"onUpdate:modelValue":u[4]||(u[4]=o=>e.region=o),placeholder:"\u8BF7\u8F93\u5165region"},null,8,["modelValue"])]),_:1})):S("",!0)])):S("",!0),t(s,{label:"\u72B6\u6001",prop:"status"},{default:l(()=>[t(h,{modelValue:e.status,"onUpdate:modelValue":u[5]||(u[5]=o=>e.status=o)},{default:l(()=>[t(c,{label:0},{default:l(()=>[Z]),_:1}),t(c,{label:1},{default:l(()=>[$]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1},8,["model"])]),_:1},512)])}}});export{lu as _,au as s};
