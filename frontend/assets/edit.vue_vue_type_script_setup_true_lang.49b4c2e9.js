import{Y as Z,y as O,u as H,E as q,W as J,K as Q,L as X,A as ee,t as ue,B as le}from"./element-plus.33d6376e.js";import{_ as oe}from"./index.vue_vue_type_script_setup_true_lang.b3f5bb6c.js";import{g as te,h as se,b as ae,M as F}from"./index.b4774df2.js";import{d as W,r as S,s as $,$ as P,e as z,w as ne,j as de,o as r,c as b,U as l,L as o,u as p,K as v,S as f,T as M,V as N,a,a8 as I,P as ie,Z as L,n as R,R as V}from"./@vue.230e89ba.js";import{c as re}from"./@vueuse.88988742.js";import{m as me,a as pe,b as ce}from"./menu.f8cc6867.js";import{P as Fe}from"./index.f737ad24.js";const _e={class:"icon-select"},fe={class:"flex justify-between"},Ee=a("div",{class:"mb-3"},"\u8BF7\u9009\u62E9\u56FE\u6807",-1),ve=["onClick"],Ce={class:"h-[280px]"},Ve={class:"flex flex-wrap"},be={key:0,class:"flex items-center"},Be=f("\u65E0"),he=W({__name:"picker",props:{modelValue:{default:""},disabled:{type:Boolean,default:!1}},emits:["update:modelValue","change"],setup(C,{emit:B}){const h=S(0),A=[{name:"element\u56FE\u6807",icons:te()},{name:"\u672C\u5730\u56FE\u6807",icons:se()}],E=$(),t=P({inputValue:"",popoverVisible:!1,popoverWidth:0,mouseoverSelect:!1,inputFocus:!1}),x=()=>{t.inputFocus=t.popoverVisible=!0},u=()=>{t.inputFocus=!1,t.popoverVisible=t.mouseoverSelect},w=m=>{t.mouseoverSelect=t.popoverVisible=!1,B("update:modelValue",m),B("change",m)},T=()=>{B("update:modelValue",""),B("change","")},U=z(()=>{var c,i;const m=(i=(c=A[h.value])==null?void 0:c.icons)!=null?i:[];if(!t.inputValue)return m;const d=t.inputValue.toLowerCase();return m.filter(e=>{if(e.toLowerCase().indexOf(d)!==-1)return e})}),g=()=>{R(()=>{var d;const m=(d=E.value)==null?void 0:d.$el.offsetWidth;t.popoverWidth=m<300?300:m})};return re(document.body,"click",()=>{t.popoverVisible=!!(t.inputFocus||t.mouseoverSelect)}),ne(()=>t.popoverVisible,async m=>{var d,c;await R(),m?(d=E.value)==null||d.focus():(c=E.value)==null||c.blur()}),de(()=>{g()}),(m,d)=>{const c=ae,i=H,e=q,_=oe,k=Z;return r(),b("div",_e,[l(k,{visible:t.popoverVisible,"onUpdate:visible":d[3]||(d[3]=s=>t.popoverVisible=s),width:t.popoverWidth},{reference:o(()=>[l(p(O),{ref_key:"inputRef",ref:E,modelValue:t.inputValue,"onUpdate:modelValue":d[2]||(d[2]=s=>t.inputValue=s),modelModifiers:{trim:!0},placeholder:"\u641C\u7D22\u56FE\u6807",disabled:C.disabled,onFocus:x,onBlur:u},{prepend:o(()=>[C.modelValue?(r(),b("div",be,[(r(),v(c,{class:"mr-1",key:C.modelValue,name:C.modelValue,size:16},null,8,["name"])),l(_,{class:"flex-1 w-20",content:C.modelValue},{default:o(()=>[f(M(C.modelValue),1)]),_:1},8,["content"])])):(r(),b(N,{key:1},[Be],64))]),append:o(()=>[l(i,null,{default:o(()=>[l(c,{name:"el-icon-Close",size:18,onClick:T})]),_:1})]),_:1},8,["modelValue","disabled"])]),default:o(()=>[a("div",{onMouseover:d[0]||(d[0]=L(s=>t.mouseoverSelect=!0,["stop"])),onMouseout:d[1]||(d[1]=L(s=>t.mouseoverSelect=!1,["stop"]))},[a("div",null,[a("div",fe,[Ee,a("div",null,[(r(),b(N,null,I(A,(s,D)=>a("span",{key:D,class:ie(["cursor-pointer text-sm ml-2",{"text-primary":D==h.value}]),onClick:y=>h.value=D},M(s.name),11,ve)),64))])]),a("div",Ce,[l(e,null,{default:o(()=>[a("div",Ve,[(r(!0),b(N,null,I(p(U),s=>(r(),b("div",{key:s,class:"m-1"},[l(i,{onClick:D=>w(s)},{default:o(()=>[l(c,{name:s,size:18},null,8,["name"])]),_:2},1032,["onClick"])]))),128))])]),_:1})])])],32)]),_:1},8,["visible","width"])])}}}),De={class:"edit-popup"},ye=f("\u76EE\u5F55"),Ae=f("\u83DC\u5355"),ke=f("\u6309\u94AE"),Te={class:"flex-1"},xe=a("div",{class:"form-tips"}," \u8BBF\u95EE\u7684\u8DEF\u7531\u5730\u5740\uFF0C\u5982\uFF1A`admin`\uFF0C\u5982\u5916\u7F51\u5730\u5740\u9700\u5185\u94FE\u8BBF\u95EE\u5219\u4EE5`http(s)://`\u5F00\u5934 ",-1),we={class:"flex-1"},Ue=a("div",{class:"form-tips"}," \u8BBF\u95EE\u7684\u7EC4\u4EF6\u8DEF\u5F84\uFF0C\u5982\uFF1A`permission/admin/index`\uFF0C\u9ED8\u8BA4\u5728`views`\u76EE\u5F55\u4E0B ",-1),ge={class:"flex-1"},Ne=a("div",{class:"form-tips"}," \u5C06\u4F5C\u4E3Aserver\u7AEFAPI\u9A8C\u6743\u4F7F\u7528\uFF0C\u5982`system:admin:list`\uFF0C\u8BF7\u8C28\u614E\u4FEE\u6539 ",-1),Se={class:"flex-1"},$e=a("div",{class:"form-tips"},' \u8BBF\u95EE\u8DEF\u7531\u7684\u9ED8\u8BA4\u4F20\u9012\u53C2\u6570\uFF0C\u5982\uFF1A`{"id": 1, "name": "admin"}`\u6216`id=1&name=admin` ',-1),Me=f("\u663E\u793A"),Ie=f("\u9690\u85CF"),Le=a("div",{class:"form-tips"}," \u9009\u62E9\u9690\u85CF\u5219\u8DEF\u7531\u5C06\u4E0D\u4F1A\u51FA\u73B0\u5728\u4FA7\u8FB9\u680F\uFF0C\u4F46\u4ECD\u7136\u53EF\u4EE5\u8BBF\u95EE ",-1),Re=f("\u6B63\u5E38"),Oe=f("\u505C\u7528"),qe=a("div",{class:"form-tips"}," \u9009\u62E9\u505C\u7528\u5219\u8DEF\u7531\u5C06\u4E0D\u4F1A\u51FA\u73B0\u5728\u4FA7\u8FB9\u680F\uFF0C\u4E5F\u4E0D\u80FD\u88AB\u8BBF\u95EE ",-1),We=a("div",{class:"form-tips"},"\u6570\u503C\u8D8A\u5927\u8D8A\u6392\u524D",-1),He=W({__name:"edit",emits:["success","close"],setup(C,{expose:B,emit:h}){const A=$(),E=$(),t=S("add"),x=z(()=>t.value=="edit"?"\u7F16\u8F91\u83DC\u5355":"\u65B0\u589E\u83DC\u5355"),u=P({id:"",pid:0,menuType:F.CATALOGUE,menuIcon:"",menuName:"",menuSort:0,paths:"",perms:"",component:"",selected:"",params:"",isCache:0,isShow:1,isDisable:0}),w={pid:[{required:!0,message:"\u8BF7\u9009\u62E9\u7236\u7EA7\u83DC\u5355",trigger:["blur","change"]}],menuName:[{required:!0,message:"\u8BF7\u8F93\u5165\u83DC\u5355\u540D\u79F0",trigger:"blur"}],paths:[{required:!0,message:"\u8BF7\u8F93\u5165\u8DEF\u7531\u5730\u5740",trigger:"blur"}],component:[{required:!0,message:"\u8BF7\u8F93\u5165\u7EC4\u4EF6\u5730\u5740",trigger:"blur"}]},T=S([]),U=async()=>{const i=await me(),e={id:0,menuName:"\u9876\u7EA7",children:[]};e.children=i,T.value.push(e)},g=async()=>{var i,e;await((i=A.value)==null?void 0:i.validate()),t.value=="edit"?await pe(u):await ce(u),(e=E.value)==null||e.close(),h("success")},m=(i="add")=>{var e;t.value=i,(e=E.value)==null||e.open()},d=i=>{for(const e in u)i[e]!=null&&i[e]!=null&&(u[e]=i[e])},c=()=>{h("close")};return U(),B({open:m,setFormData:d}),(i,e)=>{const _=Q,k=X,s=ee,D=J,y=O,G=he,j=ue,K=le,Y=q;return r(),b("div",De,[l(Fe,{ref_key:"popupRef",ref:E,title:p(x),async:!0,width:"550px",clickModalClose:!0,onConfirm:g,onClose:c},{default:o(()=>[l(Y,{class:"h-[400px] sm:h-[500px]"},{default:o(()=>[l(K,{ref_key:"formRef",ref:A,model:u,"label-width":"80px",rules:w},{default:o(()=>[l(s,{label:"\u83DC\u5355\u7C7B\u578B",prop:"menuType",required:""},{default:o(()=>[l(k,{modelValue:u.menuType,"onUpdate:modelValue":e[0]||(e[0]=n=>u.menuType=n)},{default:o(()=>[l(_,{label:p(F).CATALOGUE},{default:o(()=>[ye]),_:1},8,["label"]),l(_,{label:p(F).MENU},{default:o(()=>[Ae]),_:1},8,["label"]),l(_,{label:p(F).BUTTON},{default:o(()=>[ke]),_:1},8,["label"])]),_:1},8,["modelValue"])]),_:1}),l(s,{label:"\u7236\u7EA7\u83DC\u5355",prop:"pid"},{default:o(()=>[l(D,{class:"flex-1",modelValue:u.pid,"onUpdate:modelValue":e[1]||(e[1]=n=>u.pid=n),data:T.value,clearable:"","node-key":"id",props:{label:"menuName"},"default-expand-all":!0,placeholder:"\u8BF7\u9009\u62E9\u7236\u7EA7\u83DC\u5355","check-strictly":""},null,8,["modelValue","data"])]),_:1}),l(s,{label:"\u83DC\u5355\u540D\u79F0",prop:"menuName"},{default:o(()=>[l(y,{modelValue:u.menuName,"onUpdate:modelValue":e[2]||(e[2]=n=>u.menuName=n),placeholder:"\u8BF7\u8F93\u5165\u83DC\u5355\u540D\u79F0"},null,8,["modelValue"])]),_:1}),u.menuType!=p(F).BUTTON?(r(),v(s,{key:0,label:"\u83DC\u5355\u56FE\u6807",prop:"menuIcon"},{default:o(()=>[l(G,{class:"flex-1",modelValue:u.menuIcon,"onUpdate:modelValue":e[3]||(e[3]=n=>u.menuIcon=n)},null,8,["modelValue"])]),_:1})):V("",!0),u.menuType!=p(F).BUTTON?(r(),v(s,{key:1,label:"\u8DEF\u7531\u8DEF\u5F84",prop:"paths"},{default:o(()=>[a("div",Te,[l(y,{modelValue:u.paths,"onUpdate:modelValue":e[4]||(e[4]=n=>u.paths=n),placeholder:"\u8BF7\u8F93\u5165\u8DEF\u7531\u8DEF\u5F84"},null,8,["modelValue"]),xe])]),_:1})):V("",!0),u.menuType==p(F).MENU?(r(),v(s,{key:2,label:"\u7EC4\u4EF6\u8DEF\u5F84",prop:"component"},{default:o(()=>[a("div",we,[l(y,{modelValue:u.component,"onUpdate:modelValue":e[5]||(e[5]=n=>u.component=n),placeholder:"\u8BF7\u8F93\u5165\u7EC4\u4EF6\u8DEF\u5F84"},null,8,["modelValue"]),Ue])]),_:1})):V("",!0),u.menuType!=p(F).CATALOGUE?(r(),v(s,{key:3,label:"\u6743\u9650\u5B57\u7B26",prop:"perms"},{default:o(()=>[a("div",ge,[l(y,{modelValue:u.perms,"onUpdate:modelValue":e[6]||(e[6]=n=>u.perms=n),placeholder:"\u8BF7\u8F93\u5165\u6743\u9650\u5B57\u7B26"},null,8,["modelValue"]),Ne])]),_:1})):V("",!0),u.menuType==p(F).MENU?(r(),v(s,{key:4,label:"\u8DEF\u7531\u53C2\u6570",prop:"params"},{default:o(()=>[a("div",null,[a("div",Se,[l(y,{modelValue:u.params,"onUpdate:modelValue":e[7]||(e[7]=n=>u.params=n),placeholder:"\u8BF7\u8F93\u5165\u8DEF\u7531\u53C2\u6570"},null,8,["modelValue"])]),$e])]),_:1})):V("",!0),u.menuType!=p(F).BUTTON?(r(),v(s,{key:5,label:"\u662F\u5426\u663E\u793A",prop:"isShow",required:""},{default:o(()=>[a("div",null,[l(k,{modelValue:u.isShow,"onUpdate:modelValue":e[8]||(e[8]=n=>u.isShow=n)},{default:o(()=>[l(_,{label:1},{default:o(()=>[Me]),_:1}),l(_,{label:0},{default:o(()=>[Ie]),_:1})]),_:1},8,["modelValue"]),Le])]),_:1})):V("",!0),u.menuType!=p(F).BUTTON?(r(),v(s,{key:6,label:"\u83DC\u5355\u72B6\u6001",prop:"isDisable",required:""},{default:o(()=>[a("div",null,[l(k,{modelValue:u.isDisable,"onUpdate:modelValue":e[9]||(e[9]=n=>u.isDisable=n)},{default:o(()=>[l(_,{label:0},{default:o(()=>[Re]),_:1}),l(_,{label:1},{default:o(()=>[Oe]),_:1})]),_:1},8,["modelValue"]),qe])]),_:1})):V("",!0),l(s,{label:"\u83DC\u5355\u6392\u5E8F",prop:"menuSort"},{default:o(()=>[a("div",null,[l(j,{modelValue:u.menuSort,"onUpdate:modelValue":e[10]||(e[10]=n=>u.menuSort=n)},null,8,["modelValue"]),We])]),_:1})]),_:1},8,["model"])]),_:1})]),_:1},8,["title"])])}}});export{He as _};
