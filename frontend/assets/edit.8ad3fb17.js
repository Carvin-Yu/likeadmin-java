var U=Object.defineProperty,x=Object.defineProperties;var q=Object.getOwnPropertyDescriptors;var v=Object.getOwnPropertySymbols;var T=Object.prototype.hasOwnProperty,L=Object.prototype.propertyIsEnumerable;var b=(r,a,s)=>a in r?U(r,a,{enumerable:!0,configurable:!0,writable:!0,value:s}):r[a]=s,B=(r,a)=>{for(var s in a||(a={}))T.call(a,s)&&b(r,s,a[s]);if(v)for(var s of v(a))L.call(a,s)&&b(r,s,a[s]);return r},V=(r,a)=>x(r,q(a));import{d as N,u as R,c as z,r as g,t as M,a as $,o as j,b as G,e as u,w as n,j as m,l as H,m as l,E as I,p as J,q as K,x as O}from"./index.1f7eca83.js";import{F as P}from"./index.e8866c8a.js";import{a as Q,c as W,d as X,e as Y}from"./organize.c10ccfe2.js";const Z={class:"department-edit"},ee=J("div",{class:"muted"},"\u9ED8\u8BA4\u4E3A0\uFF0C \u6570\u503C\u8D8A\u5927\u8D8A\u6392\u524D",-1),ue=K("\u4FDD\u5B58"),se=N({setup(r){const{router:a,route:s}=R(),p=z(()=>{var o;return(o=s.query)==null?void 0:o.id}),_=g(null),D=g([]),{formData:e,rules:y}=M($({formData:{pid:"",name:"",duty:"",mobile:"",sort:0,isStop:0},rules:{pid:[{required:!0,message:"\u8BF7\u9009\u62E9\u4E0A\u7EA7\u90E8\u95E8",trigger:["change"]}],name:[{required:!0,message:"\u8BF7\u8F93\u5165\u90E8\u95E8\u540D\u79F0",trigger:["blur"]}]}})),A=()=>{Q({}).then(o=>{console.log(o,"res"),D.value=F(o)})},F=o=>o.map(i=>{const f=i.children||[];return f.length&&F(f),i.id==p.value||i.isStop==1?i.disabled=!0:i.disabled=!1,i}),h=()=>{!p.value||W({id:p.value}).then(o=>{e.value=o})},w=()=>{var o;(o=_.value)==null||o.validate(t=>{if(!t)return;Array.isArray(e.value.pid)&&(e.value.pid=e.value.pid[e.value.pid.length-1]),(p.value?X(V(B({},e.value),{id:p.value})):Y(e.value)).then(()=>{setTimeout(()=>a.go(-1),500),O({type:"success",message:"\u4FDD\u5B58\u6210\u529F"})})})};return j(()=>{h(),A()}),(o,t)=>{const i=m("el-page-header"),f=m("el-card"),C=m("el-cascader"),c=m("el-form-item"),E=m("el-input"),k=m("el-switch"),S=m("el-button");return H(),G("div",Z,[u(f,{shadow:"never"},{default:n(()=>[u(i,{content:l(p)?"\u7F16\u8F91\u90E8\u95E8":"\u65B0\u589E\u90E8\u95E8",onBack:t[0]||(t[0]=d=>o.$router.back())},null,8,["content"])]),_:1}),u(f,{shadow:"never",class:"m-t-15"},{default:n(()=>[u(l(I),{ref_key:"formRefs",ref:_,rules:l(y),class:"ls-form",model:l(e),"label-width":"150px",size:"small"},{default:n(()=>[u(c,{label:"\u4E0A\u7EA7\u90E8\u95E8",prop:"pid"},{default:n(()=>[u(C,{modelValue:l(e).pid,"onUpdate:modelValue":t[1]||(t[1]=d=>l(e).pid=d),options:D.value,props:{value:"id",label:"name",checkStrictly:!0},clearable:"",disabled:l(e).pid===0&&l(p)},null,8,["modelValue","options","disabled"])]),_:1}),u(c,{label:"\u90E8\u95E8\u540D\u79F0",prop:"name"},{default:n(()=>[u(E,{modelValue:l(e).name,"onUpdate:modelValue":t[2]||(t[2]=d=>l(e).name=d),placeholder:"\u8BF7\u8F93\u5165\u90E8\u95E8\u540D\u79F0"},null,8,["modelValue"])]),_:1}),u(c,{label:"\u8D1F\u8D23\u4EBA",prop:"duty"},{default:n(()=>[u(E,{modelValue:l(e).duty,"onUpdate:modelValue":t[3]||(t[3]=d=>l(e).duty=d),placeholder:"\u8BF7\u8F93\u5165\u8D1F\u8D23\u4EBA\u59D3\u540D"},null,8,["modelValue"])]),_:1}),u(c,{label:"\u8054\u7CFB\u7535\u8BDD",prop:"mobile"},{default:n(()=>[u(E,{modelValue:l(e).mobile,"onUpdate:modelValue":t[4]||(t[4]=d=>l(e).mobile=d),placeholder:"\u8BF7\u8F93\u5165\u8054\u7CFB\u7535\u8BDD",type:"tel"},null,8,["modelValue"])]),_:1}),u(c,{label:"\u6392\u5E8F",prop:"sort"},{default:n(()=>[u(E,{modelValue:l(e).sort,"onUpdate:modelValue":t[5]||(t[5]=d=>l(e).sort=d),placeholder:"\u8BF7\u8F93\u5165\u6392\u5E8F",type:"number"},null,8,["modelValue"]),ee]),_:1}),u(c,{label:"\u90E8\u95E8\u72B6\u6001"},{default:n(()=>[u(k,{modelValue:l(e).isStop,"onUpdate:modelValue":t[6]||(t[6]=d=>l(e).isStop=d),"active-value":0,"inactive-value":1},null,8,["modelValue"])]),_:1})]),_:1},8,["rules","model"])]),_:1}),u(P,null,{default:n(()=>[u(S,{type:"primary",size:"small",onClick:w},{default:n(()=>[ue]),_:1})]),_:1})])}}});export{se as default};
