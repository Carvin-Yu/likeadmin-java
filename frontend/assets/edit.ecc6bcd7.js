var h=Object.defineProperty,q=Object.defineProperties;var L=Object.getOwnPropertyDescriptors;var w=Object.getOwnPropertySymbols;var M=Object.prototype.hasOwnProperty,R=Object.prototype.propertyIsEnumerable;var _=(e,u,r)=>u in e?h(e,u,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[u]=r,b=(e,u)=>{for(var r in u||(u={}))M.call(u,r)&&_(e,r,u[r]);if(w)for(var r of w(u))R.call(u,r)&&_(e,r,u[r]);return e},V=(e,u)=>q(e,L(u));import{m as S}from"./index.4a7a2062.js";import{F as j}from"./index.016b7ce4.js";import{_ as N,u as z,a as T,b as W,c as X,d as G}from"./index.ad0dbca2.js";import{d as H,v as g,c as I,t as J,V as K,y as O,r as s,W as P,a as A,i as a,w as l,X as Q,b as C,E as Y,o as B,F as Z,h as x,f as ee,j as ue}from"./vendor.bbaa8c82.js";import"./index.a7b5179c.js";import"./index.0b2ee9bd.js";const ae=H({components:{MaterialSelect:S,FooterBtns:j},setup(){const e=g(null),{router:u,route:r}=z(),p=I(()=>{var t;return(t=r.query)==null?void 0:t.id}),D=g(!1),v=g([]),{formData:d,rules:f}=J(K({formData:{username:"",nickname:"",role:"",avatar:"",password:"",password_confirm:"",isDisable:0,isMultipoint:0},rules:{username:[{required:!0,message:"\u8BF7\u8F93\u5165\u8D26\u53F7",trigger:["blur"]}],nickname:[{required:!0,message:"\u8BF7\u8F93\u5165\u540D\u79F0",trigger:["blur"]}],role:[{required:!0,message:"\u8BF7\u9009\u62E9\u89D2\u8272",trigger:["blur"]}],password:[{required:!0,message:"\u8BF7\u8F93\u5165\u5BC6\u7801",trigger:"blur",pattern:/(^[^\s]*$)/},{validator:(t,m,i)=>{m?i():i(new Error("\u8BF7\u8F93\u5165\u5BC6\u7801"))},trigger:"blur"}],password_confirm:[{required:!0,message:"\u8BF7\u518D\u6B21\u8F93\u5165\u5BC6\u7801",trigger:"blur",pattern:/(^[^\s]*$)/},{validator:(t,m,i)=>{d.value.password&&(m||i(new Error("\u8BF7\u518D\u6B21\u8F93\u5165\u5BC6\u7801")),m!==d.value.password&&i(new Error("\u4E24\u6B21\u8F93\u5165\u5BC6\u7801\u4E0D\u4E00\u81F4!"))),i()},trigger:"blur"}]}})),F=()=>{T({page_type:1}).then(t=>{v.value=t.lists,v.value.push({id:0,name:"\u8D85\u7EA7\u7BA1\u7406\u5458"}),console.log("roleList.value",v.value)})},n=()=>{if(!p.value){f.value.password,f.value.password_confirm;return}D.value=!0,W({id:p.value}).then(t=>{d.value=t}).finally(()=>{D.value=!1})},c=()=>{var t;(t=e.value)==null||t.validate(m=>{if(!m)return;(p.value?X(V(b({},d.value),{id:p.value})):G(d.value)).then(()=>{setTimeout(()=>u.go(-1),500),Y({type:"success",message:"\u4FDD\u5B58\u6210\u529F"})})})};return O(()=>{n(),F()}),{id:p,formRefs:e,loading:D,formData:d,rules:f,roleList:v,onSubmit:c}}}),oe={class:"admin"},le=ee("div",{class:"muted"},"\u5EFA\u8BAE\u5C3A\u5BF8\uFF1A100*100px\uFF0C\u652F\u6301jpg\uFF0Cjpeg\uFF0Cpng\u683C\u5F0F",-1),re=ue("\u4FDD\u5B58");function te(e,u,r,p,D,v){const d=s("el-page-header"),f=s("el-card"),F=s("el-input"),n=s("el-form-item"),c=s("material-select"),t=s("el-option"),m=s("el-select"),i=s("el-switch"),E=s("el-form"),k=s("el-button"),y=s("footer-btns"),U=P("loading");return B(),A("div",oe,[a(f,{shadow:"never"},{default:l(()=>[a(d,{content:e.id?"\u7F16\u8F91\u7BA1\u7406\u5458":"\u65B0\u589E\u7BA1\u7406\u5458",onBack:u[0]||(u[0]=o=>e.$router.back())},null,8,["content"])]),_:1}),Q((B(),C(f,{shadow:"never",class:"m-t-15"},{default:l(()=>[a(E,{ref:"formRefs",rules:e.rules,class:"ls-form",model:e.formData,"label-width":"150px",size:"small"},{default:l(()=>[a(n,{label:"\u8D26\u53F7\uFF1A",prop:"username"},{default:l(()=>[a(F,{modelValue:e.formData.username,"onUpdate:modelValue":u[1]||(u[1]=o=>e.formData.username=o),placeholder:"\u8BF7\u8F93\u5165\u8D26\u53F7"},null,8,["modelValue"])]),_:1}),a(n,{label:"\u5934\u50CF\uFF1A"},{default:l(()=>[a(c,{modelValue:e.formData.avatar,"onUpdate:modelValue":u[2]||(u[2]=o=>e.formData.avatar=o),limit:1},null,8,["modelValue"]),le]),_:1}),a(n,{label:"\u540D\u79F0\uFF1A",prop:"nickname"},{default:l(()=>[a(F,{modelValue:e.formData.nickname,"onUpdate:modelValue":u[3]||(u[3]=o=>e.formData.nickname=o),placeholder:"\u8BF7\u8F93\u5165\u540D\u79F0"},null,8,["modelValue"])]),_:1}),a(n,{label:"\u89D2\u8272\uFF1A",prop:"role"},{default:l(()=>[a(m,{modelValue:e.formData.role,"onUpdate:modelValue":u[4]||(u[4]=o=>e.formData.role=o),placeholder:"\u8BF7\u9009\u62E9\u89D2\u8272",disabled:e.formData.id==1},{default:l(()=>[(B(!0),A(Z,null,x(e.roleList,(o,$)=>(B(),C(t,{key:$,label:o.name,value:o.id+""},null,8,["label","value"]))),128))]),_:1},8,["modelValue","disabled"])]),_:1}),a(n,{label:"\u5BC6\u7801\uFF1A",prop:"password"},{default:l(()=>[a(F,{modelValue:e.formData.password,"onUpdate:modelValue":u[5]||(u[5]=o=>e.formData.password=o),"show-password":"",type:"password",placeholder:"\u8BF7\u8F93\u5165\u5BC6\u7801"},null,8,["modelValue"])]),_:1}),a(n,{label:"\u786E\u8BA4\u5BC6\u7801\uFF1A",prop:"password_confirm"},{default:l(()=>[a(F,{modelValue:e.formData.password_confirm,"onUpdate:modelValue":u[6]||(u[6]=o=>e.formData.password_confirm=o),"show-password":"",type:"password",placeholder:"\u8BF7\u8F93\u5165\u786E\u8BA4\u5BC6\u7801"},null,8,["modelValue"])]),_:1}),a(n,{label:"\u7BA1\u7406\u5458\u72B6\u6001"},{default:l(()=>[a(i,{modelValue:e.formData.isDisable,"onUpdate:modelValue":u[7]||(u[7]=o=>e.formData.isDisable=o),"active-value":0,"inactive-value":1},null,8,["modelValue"])]),_:1}),a(n,{label:"\u652F\u6301\u591A\u5904\u767B\u5F55"},{default:l(()=>[a(i,{modelValue:e.formData.isMultipoint,"onUpdate:modelValue":u[8]||(u[8]=o=>e.formData.isMultipoint=o),"active-value":1,"inactive-value":0},null,8,["modelValue"])]),_:1})]),_:1},8,["rules","model"])]),_:1})),[[U,e.loading]]),a(y,null,{default:l(()=>[a(k,{type:"primary",size:"small",onClick:e.onSubmit},{default:l(()=>[re]),_:1},8,["onClick"])]),_:1})])}var Fe=N(ae,[["render",te]]);export{Fe as default};
