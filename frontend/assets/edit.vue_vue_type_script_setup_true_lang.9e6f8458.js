import{_ as S,A as x,y as R,t as U,s as h,B as N}from"./element-plus.f93fd622.js";import{d as I,a as q,b as L,c as M}from"./department.e46fc6ed.js";import{P}from"./index.78e6f421.js";import{u as T}from"./useDictOptions.7e2891d1.js";import{f as O}from"./index.86c64501.js";import{d as j,s as c,r as z,e as G,a0 as H,o as f,c as J,V as l,M as a,L as K,u as E,S as Q,a as _}from"./@vue.cab01781.js";const W={class:"edit-popup"},X=_("div",{class:"form-tips"},"\u9ED8\u8BA4\u4E3A0\uFF0C \u6570\u503C\u8D8A\u5927\u8D8A\u6392\u524D",-1),te=j({__name:"edit",emits:["success","close"],setup(Y,{expose:F,emit:r}){const i=c(),d=c(),n=z("add"),D=G(()=>n.value=="edit"?"\u7F16\u8F91\u90E8\u95E8":"\u65B0\u589E\u90E8\u95E8"),u=H({id:"",pid:"",name:"",duty:"",mobile:"",sort:0,isStop:0}),V={pid:[{required:!0,message:"\u8BF7\u9009\u62E9\u4E0A\u7EA7\u90E8\u95E8",trigger:["change"]}],name:[{required:!0,message:"\u8BF7\u8F93\u5165\u90E8\u95E8\u540D\u79F0",trigger:["blur"]}]},{optionsData:B}=T({dept:{api:I}}),b=async()=>{var o,e;await((o=i.value)==null?void 0:o.validate()),n.value=="edit"?await q(u):await L(u),(e=d.value)==null||e.close(),O.msgSuccess("\u64CD\u4F5C\u6210\u529F"),r("success")},v=(o="add")=>{var e;n.value=o,(e=d.value)==null||e.open()},m=o=>{for(const e in u)o[e]!=null&&o[e]!=null&&(u[e]=o[e])},y=async o=>{const e=await M({id:o.id});m(e)},A=()=>{r("close")};return F({open:v,setFormData:m,getDetail:y}),(o,e)=>{const C=S,s=x,p=R,k=U,w=h,g=N;return f(),J("div",W,[l(P,{ref_key:"popupRef",ref:d,title:E(D),async:!0,width:"550px",clickModalClose:!0,onConfirm:b,onClose:A},{default:a(()=>[l(g,{ref_key:"formRef",ref:i,model:u,"label-width":"84px",rules:V},{default:a(()=>[u.pid!==0?(f(),K(s,{key:0,label:"\u4E0A\u7EA7\u90E8\u95E8",prop:"pid"},{default:a(()=>[l(C,{class:"flex-1",modelValue:u.pid,"onUpdate:modelValue":e[0]||(e[0]=t=>u.pid=t),data:E(B).dept,clearable:"","node-key":"id",props:{value:"id",label:"name"},"check-strictly":"","default-expand-all":!0,placeholder:"\u8BF7\u9009\u62E9\u4E0A\u7EA7\u90E8\u95E8"},null,8,["modelValue","data"])]),_:1})):Q("",!0),l(s,{label:"\u90E8\u95E8\u540D\u79F0",prop:"name"},{default:a(()=>[l(p,{modelValue:u.name,"onUpdate:modelValue":e[1]||(e[1]=t=>u.name=t),placeholder:"\u8BF7\u8F93\u5165\u90E8\u95E8\u540D\u79F0"},null,8,["modelValue"])]),_:1}),l(s,{label:"\u8D1F\u8D23\u4EBA",prop:"duty"},{default:a(()=>[l(p,{modelValue:u.duty,"onUpdate:modelValue":e[2]||(e[2]=t=>u.duty=t),placeholder:"\u8BF7\u8F93\u5165\u8D1F\u8D23\u4EBA\u59D3\u540D"},null,8,["modelValue"])]),_:1}),l(s,{label:"\u8054\u7CFB\u7535\u8BDD",prop:"mobile"},{default:a(()=>[l(p,{modelValue:u.mobile,"onUpdate:modelValue":e[3]||(e[3]=t=>u.mobile=t),placeholder:"\u8BF7\u8F93\u5165\u8054\u7CFB\u7535\u8BDD"},null,8,["modelValue"])]),_:1}),l(s,{label:"\u6392\u5E8F",prop:"sort"},{default:a(()=>[_("div",null,[l(k,{modelValue:u.sort,"onUpdate:modelValue":e[4]||(e[4]=t=>u.sort=t)},null,8,["modelValue"]),X])]),_:1}),l(s,{label:"\u90E8\u95E8\u72B6\u6001",prop:"isStop"},{default:a(()=>[l(w,{modelValue:u.isStop,"onUpdate:modelValue":e[5]||(e[5]=t=>u.isStop=t),"active-value":0,"inactive-value":1},null,8,["modelValue"])]),_:1})]),_:1},8,["model"])]),_:1},8,["title"])])}}});export{te as _};
