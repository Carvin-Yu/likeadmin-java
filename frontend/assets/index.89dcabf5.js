import{P as I,u as S}from"./index.8b94e341.js";import{P as q}from"./index.97464251.js";import{_ as N,y as k,c as T,z as j,B as R,a as M}from"./index.2df3607c.js";import{d as W,V as X,v as G,y as H,r as n,W as B,a as A,i as e,w as t,X as f,b as p,o as u,F as J,h as K,f as D,j as _}from"./vendor.bbaa8c82.js";const O=W({components:{Pagination:I,Popup:q},setup(){const a=X({username:"",nickname:"",role:""}),s=G([]),{pager:F,requestApi:r,resetParams:w,resetPage:V}=S({callback:k,params:a}),c=o=>{T({id:o.id,username:o.username,nickname:o.nickname,role:o.role,isDisable:o.isDisable,multipoint_login:o.multipoint_login}).finally(()=>{r()})},d=async(o,v)=>{await j({isDisable:o,id:v}),r()},h=o=>{R({id:o}).then(()=>{r()})},g=()=>{M({page_type:1}).then(o=>{s.value=o.lists})};return H(()=>{r(),g()}),{formData:a,roleList:s,pager:F,requestApi:r,resetParams:w,resetPage:V,adminLists:k,changeStatus:c,handleDelete:h,handleStatusChange:d}}}),Q={class:"admin"},Y={class:"m-l-20"},Z=_("\u67E5\u8BE2"),x=_("\u91CD\u7F6E"),ee=_("\u65B0\u589E\u7BA1\u7406\u5458"),ae={class:"m-t-15"},te=_("\u7F16\u8F91"),le=_("\u5220\u9664"),oe={class:"flex row-right"};function ne(a,s,F,r,w,V){const c=n("el-input"),d=n("el-form-item"),h=n("el-option"),g=n("el-select"),o=n("el-button"),v=n("el-form"),y=n("el-card"),C=n("router-link"),i=n("el-table-column"),P=n("el-avatar"),E=n("el-switch"),L=n("popup"),U=n("el-table"),$=n("pagination"),b=B("perm"),z=B("loading");return u(),A("div",Q,[e(y,{shadow:"never"},{default:t(()=>[e(v,{class:"ls-form",model:a.formData,"label-width":"80px",size:"small",inline:""},{default:t(()=>[e(d,{label:"\u8D26\u53F7\uFF1A"},{default:t(()=>[e(c,{modelValue:a.formData.username,"onUpdate:modelValue":s[0]||(s[0]=l=>a.formData.username=l),class:"ls-input"},null,8,["modelValue"])]),_:1}),e(d,{label:"\u540D\u79F0\uFF1A"},{default:t(()=>[e(c,{modelValue:a.formData.nickname,"onUpdate:modelValue":s[1]||(s[1]=l=>a.formData.nickname=l),class:"ls-input"},null,8,["modelValue"])]),_:1}),e(d,{label:"\u89D2\u8272\uFF1A"},{default:t(()=>[e(g,{modelValue:a.formData.role,"onUpdate:modelValue":s[2]||(s[2]=l=>a.formData.role=l),placeholder:"\u5168\u90E8"},{default:t(()=>[(u(!0),A(J,null,K(a.roleList,(l,m)=>(u(),p(h,{key:m,label:l.name,value:l.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),e(d,null,{default:t(()=>[D("div",Y,[e(o,{type:"primary",onClick:a.resetPage},{default:t(()=>[Z]),_:1},8,["onClick"]),e(o,{onClick:a.resetParams},{default:t(()=>[x]),_:1},8,["onClick"])])]),_:1})]),_:1},8,["model"])]),_:1}),f((u(),p(y,{class:"m-t-15",shadow:"never"},{default:t(()=>[e(C,{to:"/permission/admin/edit"},{default:t(()=>[f((u(),p(o,{type:"primary",size:"small"},{default:t(()=>[ee]),_:1})),[[b,["system:admin:add"]]])]),_:1}),D("div",ae,[e(U,{data:a.pager.lists},{default:t(()=>[e(i,{label:"ID",prop:"id","min-width":"60"}),e(i,{label:"\u5934\u50CF","min-width":"100"},{default:t(({row:l})=>[e(P,{size:50,src:l.avatar},null,8,["src"])]),_:1}),e(i,{label:"\u8D26\u53F7",prop:"username","min-width":"100"}),e(i,{label:"\u540D\u79F0",prop:"nickname","min-width":"100"}),e(i,{label:"\u89D2\u8272",prop:"role","min-width":"100"}),e(i,{label:"\u521B\u5EFA\u65F6\u95F4",prop:"createTime","min-width":"150"}),e(i,{label:"\u6700\u8FD1\u767B\u5F55\u65F6\u95F4",prop:"lastLoginTime","min-width":"150"}),e(i,{label:"\u6700\u8FD1\u767B\u5F55IP",prop:"lastLoginIp","min-width":"100"}),e(i,{label:"\u72B6\u6001","min-width":"100"},{default:t(l=>[e(E,{modelValue:l.row.isDisable,"onUpdate:modelValue":m=>l.row.isDisable=m,"active-value":0,"inactive-value":1,onChange:m=>a.handleStatusChange(m,l.row.id)},null,8,["modelValue","onUpdate:modelValue","onChange"])]),_:1}),e(i,{label:"\u64CD\u4F5C",width:"150",fixed:"right"},{default:t(({row:l})=>[f((u(),p(C,{class:"m-r-10",to:{path:"/permission/admin/edit",query:{id:l.id}}},{default:t(()=>[e(o,{type:"text"},{default:t(()=>[te]),_:1})]),_:2},1032,["to"])),[[b,["system:admin:edit"]]]),f((u(),p(L,{class:"m-r-10 inline",onConfirm:m=>a.handleDelete(l.id)},{trigger:t(()=>[e(o,{type:"text"},{default:t(()=>[le]),_:1})]),_:2},1032,["onConfirm"])),[[b,["system:admin:del"]]])]),_:1})]),_:1},8,["data"])]),D("div",oe,[e($,{modelValue:a.pager,"onUpdate:modelValue":s[3]||(s[3]=l=>a.pager=l),layout:"total, prev, pager, next, jumper",onChange:a.requestApi},null,8,["modelValue","onChange"])])]),_:1})),[[z,a.pager.loading]])])}var de=N(O,[["render",ne],["__scopeId","data-v-f8651fc8"]]);export{de as default};
